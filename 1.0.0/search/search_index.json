{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"osrs-prices","text":"<p>A typed Python client for the OSRS Real-time Prices API.</p>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install osrs-prices\n\n# With pandas support\npip install osrs-prices[pandas]\n</code></pre>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code>from osrs_prices import Client\n\nwith Client(user_agent=\"my-app/1.0 contact@example.com\") as client:\n    # Get item metadata\n    mapping = client.get_mapping()\n    print(f\"Loaded {len(mapping.items)} items\")\n\n    # Get latest prices\n    latest = client.get_latest(item_id=4151)  # Abyssal whip\n    whip = latest.data[4151]\n    print(f\"Abyssal whip: {whip.high:,} gp (instant-buy)\")\n\n    # Get price averages\n    averages = client.get_5m_average()\n\n    # Get historical data\n    timeseries = client.get_timeseries(item_id=4151, timestep=\"1h\")\n</code></pre>"},{"location":"#dataframe-support","title":"DataFrame Support","text":"<p>Convert any response to a pandas DataFrame (requires <code>pip install osrs-prices[pandas]</code>):</p> <pre><code>from osrs_prices import Client\nfrom osrs_prices.pandas import to_dataframe\n\nwith Client(user_agent=\"my-app/1.0\") as client:\n    mapping = client.get_mapping()\n    df = to_dataframe(mapping)\n    print(df.head())\n</code></pre>"},{"location":"#api-reference","title":"API Reference","text":""},{"location":"#client-methods","title":"Client Methods","text":"Method Description <code>get_latest(item_id=None)</code> Current instant-buy/sell prices <code>get_mapping(force_refresh=False)</code> Item metadata (cached 1 hour) <code>get_5m_average(timestamp=None)</code> 5-minute price averages <code>get_1h_average(timestamp=None)</code> 1-hour price averages <code>get_timeseries(item_id, timestep)</code> Historical data (timestep: \"5m\", \"1h\", \"6h\", \"24h\") <code>get_item_by_name(name)</code> Find item by exact name"},{"location":"#models","title":"Models","text":"<ul> <li><code>LatestPrice</code> - Instant buy/sell prices with timestamps</li> <li><code>AveragePrice</code> - Average prices with volumes</li> <li><code>ItemMapping</code> - Item metadata (name, examine, alch values, etc.)</li> <li><code>TimeseriesDataPoint</code> - Historical price point</li> </ul>"},{"location":"#exceptions","title":"Exceptions","text":"<ul> <li><code>OSRSPricesError</code> - Base exception</li> <li><code>APIError</code> - API returned an error</li> <li><code>RateLimitError</code> - Rate limit exceeded (429)</li> <li><code>ValidationError</code> - Invalid input (e.g., blocked user agent)</li> </ul>"},{"location":"#user-agent-requirement","title":"User-Agent Requirement","text":"<p>The API requires a descriptive User-Agent. Generic agents like <code>python-requests</code> are blocked. Use a format like:</p> <pre><code>my-app/1.0 contact@example.com\n</code></pre>"},{"location":"#development","title":"Development","text":"<pre><code># Install dependencies\nuv sync --all-extras\n\n# Run tests\nuv run pytest\n\n# Run type checking\nuv run mypy src/\n\n# Run integration tests (hits real API)\nuv run pytest -m integration\n</code></pre>"},{"location":"#license","title":"License","text":"<p>MIT</p>"},{"location":"api/client/","title":"Client","text":"<p>The <code>Client</code> class is the main entry point for interacting with the OSRS Real-time Prices API.</p>"},{"location":"api/client/#osrs_prices.Client","title":"<code>osrs_prices.Client(user_agent, timeout=DEFAULT_TIMEOUT, cache_ttl=DEFAULT_CACHE_TTL)</code>","text":"<p>Client for the OSRS Real-time Prices API.</p> <p>This client provides access to all OSRS Prices API endpoints with automatic caching for mapping data and proper User-Agent handling.</p> Example <p>with Client(user_agent=\"my-app/1.0\") as client: ...     mapping = client.get_mapping() ...     prices = client.get_latest()</p> <p>Initialize the client.</p> <p>Parameters:</p> Name Type Description Default <code>user_agent</code> <code>str</code> <p>A descriptive User-Agent string identifying your application.        Must not be a generic library agent (e.g., \"python-requests\").</p> required <code>timeout</code> <code>float</code> <p>Request timeout in seconds.</p> <code>DEFAULT_TIMEOUT</code> <code>cache_ttl</code> <code>float</code> <p>Time-to-live for the mapping cache in seconds.</p> <code>DEFAULT_CACHE_TTL</code> <p>Raises:</p> Type Description <code>ValidationError</code> <p>If the user_agent is invalid or blocked.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def __init__(\n    self,\n    user_agent: str,\n    timeout: float = DEFAULT_TIMEOUT,\n    cache_ttl: float = DEFAULT_CACHE_TTL,\n) -&gt; None:\n    \"\"\"Initialize the client.\n\n    Args:\n        user_agent: A descriptive User-Agent string identifying your application.\n                   Must not be a generic library agent (e.g., \"python-requests\").\n        timeout: Request timeout in seconds.\n        cache_ttl: Time-to-live for the mapping cache in seconds.\n\n    Raises:\n        ValidationError: If the user_agent is invalid or blocked.\n    \"\"\"\n    self._validate_user_agent(user_agent)\n\n    self._http_client = httpx.Client(\n        headers={\"User-Agent\": user_agent},\n        timeout=timeout,\n    )\n\n    self._latest = LatestEndpoint(self._http_client)\n    self._mapping = MappingEndpoint(self._http_client, cache_ttl=cache_ttl)\n    self._five_minute = FiveMinuteEndpoint(self._http_client)\n    self._one_hour = OneHourEndpoint(self._http_client)\n    self._timeseries = TimeseriesEndpoint(self._http_client)\n\n    self._name_to_id_cache: dict[str, int] | None = None\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.__enter__","title":"<code>__enter__()</code>","text":"<p>Enter the context manager.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def __enter__(self) -&gt; \"Client\":\n    \"\"\"Enter the context manager.\"\"\"\n    return self\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.__exit__","title":"<code>__exit__(exc_type, exc_val, exc_tb)</code>","text":"<p>Exit the context manager and close the HTTP client.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def __exit__(\n    self,\n    exc_type: type[BaseException] | None,\n    exc_val: BaseException | None,\n    exc_tb: TracebackType | None,\n) -&gt; None:\n    \"\"\"Exit the context manager and close the HTTP client.\"\"\"\n    self.close()\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.close","title":"<code>close()</code>","text":"<p>Close the HTTP client and release resources.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def close(self) -&gt; None:\n    \"\"\"Close the HTTP client and release resources.\"\"\"\n    self._http_client.close()\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.get_latest","title":"<code>get_latest(item_id=None)</code>","text":"<p>Get the latest instant-buy and instant-sell prices.</p> <p>Parameters:</p> Name Type Description Default <code>item_id</code> <code>int | None</code> <p>Optional item ID to filter to a single item.</p> <code>None</code> <p>Returns:</p> Type Description <code>LatestResponse</code> <p>The latest price data.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def get_latest(self, item_id: int | None = None) -&gt; LatestResponse:\n    \"\"\"Get the latest instant-buy and instant-sell prices.\n\n    Args:\n        item_id: Optional item ID to filter to a single item.\n\n    Returns:\n        The latest price data.\n    \"\"\"\n    return self._latest.fetch(item_id)\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.get_mapping","title":"<code>get_mapping(force_refresh=False)</code>","text":"<p>Get item mapping data (metadata for all items).</p> <p>This data is cached by default. Use force_refresh to bypass the cache.</p> <p>Parameters:</p> Name Type Description Default <code>force_refresh</code> <code>bool</code> <p>If True, bypass the cache and fetch fresh data.</p> <code>False</code> <p>Returns:</p> Type Description <code>MappingResponse</code> <p>The item mapping data.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def get_mapping(self, force_refresh: bool = False) -&gt; MappingResponse:\n    \"\"\"Get item mapping data (metadata for all items).\n\n    This data is cached by default. Use force_refresh to bypass the cache.\n\n    Args:\n        force_refresh: If True, bypass the cache and fetch fresh data.\n\n    Returns:\n        The item mapping data.\n    \"\"\"\n    return self._mapping.fetch(force_refresh)\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.get_5m_average","title":"<code>get_5m_average(timestamp=None)</code>","text":"<p>Get 5-minute average prices.</p> <p>Parameters:</p> Name Type Description Default <code>timestamp</code> <code>int | None</code> <p>Optional Unix timestamp to get historical data.       If not provided, returns the latest data.</p> <code>None</code> <p>Returns:</p> Type Description <code>AverageResponse</code> <p>The 5-minute average price data.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def get_5m_average(self, timestamp: int | None = None) -&gt; AverageResponse:\n    \"\"\"Get 5-minute average prices.\n\n    Args:\n        timestamp: Optional Unix timestamp to get historical data.\n                  If not provided, returns the latest data.\n\n    Returns:\n        The 5-minute average price data.\n    \"\"\"\n    return self._five_minute.fetch(timestamp)\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.get_1h_average","title":"<code>get_1h_average(timestamp=None)</code>","text":"<p>Get 1-hour average prices.</p> <p>Parameters:</p> Name Type Description Default <code>timestamp</code> <code>int | None</code> <p>Optional Unix timestamp to get historical data.       If not provided, returns the latest data.</p> <code>None</code> <p>Returns:</p> Type Description <code>AverageResponse</code> <p>The 1-hour average price data.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def get_1h_average(self, timestamp: int | None = None) -&gt; AverageResponse:\n    \"\"\"Get 1-hour average prices.\n\n    Args:\n        timestamp: Optional Unix timestamp to get historical data.\n                  If not provided, returns the latest data.\n\n    Returns:\n        The 1-hour average price data.\n    \"\"\"\n    return self._one_hour.fetch(timestamp)\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.get_timeseries","title":"<code>get_timeseries(item_id, timestep)</code>","text":"<p>Get historical timeseries data for an item.</p> <p>Parameters:</p> Name Type Description Default <code>item_id</code> <code>int</code> <p>The item ID to fetch data for.</p> required <code>timestep</code> <code>Timestep</code> <p>The time interval for data points (\"5m\", \"1h\", \"6h\", or \"24h\").</p> required <p>Returns:</p> Type Description <code>TimeseriesResponse</code> <p>The timeseries data.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def get_timeseries(self, item_id: int, timestep: Timestep) -&gt; TimeseriesResponse:\n    \"\"\"Get historical timeseries data for an item.\n\n    Args:\n        item_id: The item ID to fetch data for.\n        timestep: The time interval for data points (\"5m\", \"1h\", \"6h\", or \"24h\").\n\n    Returns:\n        The timeseries data.\n    \"\"\"\n    return self._timeseries.fetch(item_id, timestep)\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.invalidate_mapping_cache","title":"<code>invalidate_mapping_cache()</code>","text":"<p>Manually invalidate the mapping cache.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def invalidate_mapping_cache(self) -&gt; None:\n    \"\"\"Manually invalidate the mapping cache.\"\"\"\n    self._mapping.invalidate_cache()\n    self._name_to_id_cache = None\n</code></pre>"},{"location":"api/client/#osrs_prices.Client.get_item_by_name","title":"<code>get_item_by_name(name)</code>","text":"<p>Find an item by its exact name.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>The exact item name to search for.</p> required <p>Returns:</p> Type Description <code>ItemMapping | None</code> <p>The item mapping if found, None otherwise.</p> Source code in <code>src/osrs_prices/client.py</code> <pre><code>def get_item_by_name(self, name: str) -&gt; ItemMapping | None:\n    \"\"\"Find an item by its exact name.\n\n    Args:\n        name: The exact item name to search for.\n\n    Returns:\n        The item mapping if found, None otherwise.\n    \"\"\"\n    if self._name_to_id_cache is None:\n        mapping = self.get_mapping()\n        self._name_to_id_cache = {item.name: item.id for item in mapping.items}\n\n    item_id = self._name_to_id_cache.get(name)\n    if item_id is None:\n        return None\n\n    mapping = self.get_mapping()\n    for item in mapping.items:\n        if item.id == item_id:\n            return item\n    return None\n</code></pre>"},{"location":"api/exceptions/","title":"Exceptions","text":"<p>Exception classes for error handling.</p>"},{"location":"api/exceptions/#osrs_prices.OSRSPricesError","title":"<code>osrs_prices.OSRSPricesError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>Base exception for all OSRS Prices errors.</p>"},{"location":"api/exceptions/#osrs_prices.APIError","title":"<code>osrs_prices.APIError(message, status_code=None)</code>","text":"<p>               Bases: <code>OSRSPricesError</code></p> <p>Raised when the API returns an error response.</p> Source code in <code>src/osrs_prices/exceptions.py</code> <pre><code>def __init__(self, message: str, status_code: int | None = None) -&gt; None:\n    super().__init__(message)\n    self.status_code = status_code\n</code></pre>"},{"location":"api/exceptions/#osrs_prices.RateLimitError","title":"<code>osrs_prices.RateLimitError(message='Rate limit exceeded')</code>","text":"<p>               Bases: <code>APIError</code></p> <p>Raised when the API rate limit is exceeded.</p> Source code in <code>src/osrs_prices/exceptions.py</code> <pre><code>def __init__(self, message: str = \"Rate limit exceeded\") -&gt; None:\n    super().__init__(message, status_code=429)\n</code></pre>"},{"location":"api/exceptions/#osrs_prices.ValidationError","title":"<code>osrs_prices.ValidationError</code>","text":"<p>               Bases: <code>OSRSPricesError</code></p> <p>Raised when input validation fails.</p>"},{"location":"api/models/","title":"Models","text":"<p>Pydantic models for API responses.</p>"},{"location":"api/models/#price-models","title":"Price Models","text":""},{"location":"api/models/#osrs_prices.LatestPrice","title":"<code>osrs_prices.LatestPrice</code>","text":"<p>               Bases: <code>OSRSBaseModel</code></p> <p>Current instant-buy and instant-sell prices for an item.</p>"},{"location":"api/models/#osrs_prices.LatestResponse","title":"<code>osrs_prices.LatestResponse</code>","text":"<p>               Bases: <code>OSRSBaseModel</code></p> <p>Response from the /latest endpoint.</p>"},{"location":"api/models/#osrs_prices.LatestResponse.from_api","title":"<code>from_api(data)</code>  <code>classmethod</code>","text":"<p>Create a LatestResponse from API data.</p> <p>The API returns {\"data\": {\"item_id\": {...}, ...}}. Item IDs are strings in the JSON but we convert to int.</p> Source code in <code>src/osrs_prices/models/prices.py</code> <pre><code>@classmethod\ndef from_api(cls, data: dict[str, Any]) -&gt; \"LatestResponse\":\n    \"\"\"Create a LatestResponse from API data.\n\n    The API returns {\"data\": {\"item_id\": {...}, ...}}.\n    Item IDs are strings in the JSON but we convert to int.\n    \"\"\"\n    prices = {\n        int(item_id): LatestPrice.model_validate(price_data)\n        for item_id, price_data in data.get(\"data\", {}).items()\n    }\n    return cls(data=prices)\n</code></pre>"},{"location":"api/models/#osrs_prices.AveragePrice","title":"<code>osrs_prices.AveragePrice</code>","text":"<p>               Bases: <code>OSRSBaseModel</code></p> <p>Average price data over a time period (5-minute or 1-hour).</p>"},{"location":"api/models/#osrs_prices.AverageResponse","title":"<code>osrs_prices.AverageResponse</code>","text":"<p>               Bases: <code>OSRSBaseModel</code></p> <p>Response from the /5m or /1h endpoints.</p>"},{"location":"api/models/#osrs_prices.AverageResponse.from_api","title":"<code>from_api(data)</code>  <code>classmethod</code>","text":"<p>Create an AverageResponse from API data.</p> <p>The API returns {\"data\": {\"item_id\": {...}, ...}, \"timestamp\": ...}.</p> Source code in <code>src/osrs_prices/models/prices.py</code> <pre><code>@classmethod\ndef from_api(cls, data: dict[str, Any]) -&gt; \"AverageResponse\":\n    \"\"\"Create an AverageResponse from API data.\n\n    The API returns {\"data\": {\"item_id\": {...}, ...}, \"timestamp\": ...}.\n    \"\"\"\n    prices = {\n        int(item_id): AveragePrice.model_validate(price_data)\n        for item_id, price_data in data.get(\"data\", {}).items()\n    }\n    return cls(data=prices, timestamp=data.get(\"timestamp\", 0))\n</code></pre>"},{"location":"api/models/#item-models","title":"Item Models","text":""},{"location":"api/models/#osrs_prices.ItemMapping","title":"<code>osrs_prices.ItemMapping</code>","text":"<p>               Bases: <code>OSRSBaseModel</code></p> <p>Represents metadata for a single item.</p>"},{"location":"api/models/#osrs_prices.MappingResponse","title":"<code>osrs_prices.MappingResponse</code>","text":"<p>               Bases: <code>OSRSBaseModel</code></p> <p>Response from the /mapping endpoint.</p>"},{"location":"api/models/#osrs_prices.MappingResponse.from_list","title":"<code>from_list(data)</code>  <code>classmethod</code>","text":"<p>Create a MappingResponse from a list of item dicts.</p> <p>The API returns a raw list, not a wrapped object.</p> Source code in <code>src/osrs_prices/models/items.py</code> <pre><code>@classmethod\ndef from_list(cls, data: list[dict[str, Any]]) -&gt; \"MappingResponse\":\n    \"\"\"Create a MappingResponse from a list of item dicts.\n\n    The API returns a raw list, not a wrapped object.\n    \"\"\"\n    items = [ItemMapping.model_validate(item) for item in data]\n    return cls(items=items)\n</code></pre>"},{"location":"api/models/#timeseries-models","title":"Timeseries Models","text":""},{"location":"api/models/#osrs_prices.TimeseriesDataPoint","title":"<code>osrs_prices.TimeseriesDataPoint</code>","text":"<p>               Bases: <code>OSRSBaseModel</code></p> <p>A single data point in a timeseries.</p>"},{"location":"api/models/#osrs_prices.TimeseriesResponse","title":"<code>osrs_prices.TimeseriesResponse</code>","text":"<p>               Bases: <code>OSRSBaseModel</code></p> <p>Response from the /timeseries endpoint.</p>"},{"location":"api/models/#osrs_prices.TimeseriesResponse.from_api","title":"<code>from_api(data)</code>  <code>classmethod</code>","text":"<p>Create a TimeseriesResponse from API data.</p> <p>The API returns {\"data\": [{...}, ...]}.</p> Source code in <code>src/osrs_prices/models/timeseries.py</code> <pre><code>@classmethod\ndef from_api(cls, data: dict[str, Any]) -&gt; \"TimeseriesResponse\":\n    \"\"\"Create a TimeseriesResponse from API data.\n\n    The API returns {\"data\": [{...}, ...]}.\n    \"\"\"\n    points = [\n        TimeseriesDataPoint.model_validate(point) for point in data.get(\"data\", [])\n    ]\n    return cls(data=points)\n</code></pre>"},{"location":"api/models/#osrs_prices.Timestep","title":"<code>osrs_prices.Timestep = Literal['5m', '1h', '6h', '24h']</code>  <code>module-attribute</code>","text":""}]}